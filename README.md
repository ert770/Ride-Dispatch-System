# ğŸš— Ride-Dispatch-System (å…±ä¹˜/å«è»Šå¹³å°)

> æ¨¡æ“¬ Uber/Taxi çš„æ ¸å¿ƒæ´¾å–®èˆ‡èª¿åº¦é‚è¼¯ç³»çµ±

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

æœ¬å°ˆæ¡ˆç‚ºå…±ä¹˜å«è»Šå¹³å°çš„æ ¸å¿ƒé‚è¼¯æ¨¡æ“¬ç³»çµ±ï¼Œé‡é»å¯¦ä½œï¼š
- **é…å°æ¼”ç®—æ³•** - æœ€è¿‘è·é›¢ã€è»Šç¨®ç¯©é¸
- **è¨ˆåƒ¹ç³»çµ±** - åƒæ•¸åŒ–è²»ç‡å…¬å¼
- **ç‹€æ…‹æ©Ÿ** - è¨‚å–®ç”Ÿå‘½é€±æœŸç®¡ç†
- **ä½µç™¼æ§åˆ¶** - H2 æ¶å–®ã€H4 å†ªç­‰æ€§

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   JavaFX Clients (ä¸‰è¦–çª—)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Passenger Appâ”‚   Driver App     â”‚      Admin Console        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚                       â”‚
       â”‚         HTTP/REST (Polling)            â”‚
       â”‚                â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Spring Boot Server                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é€šè¨Šæ–¹å¼
- **å”å®š**: HTTP/REST
- **è³‡æ–™æ ¼å¼**: JSON
- **å³æ™‚åŒæ­¥**: Polling (æ¯ 0.5-1 ç§’è¼ªè©¢)

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
ride-dispatch-system/
â”œâ”€â”€ server/                    # Spring Boot å¾Œç«¯
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ com/uber/
â”‚   â”‚       â”œâ”€â”€ controller/    # REST API Controllers
â”‚   â”‚       â”œâ”€â”€ service/       # Business Logic
â”‚   â”‚       â”œâ”€â”€ model/         # Domain Models
â”‚   â”‚       â””â”€â”€ repository/    # Data Access
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ clients/                   # JavaFX å‰ç«¯
â”‚   â”œâ”€â”€ passenger-app/         # ä¹˜å®¢ç«¯è¦–çª—
â”‚   â”œâ”€â”€ driver-app/            # å¸æ©Ÿç«¯è¦–çª—
â”‚   â””â”€â”€ admin-console/         # ç®¡ç†å¾Œå°è¦–çª—
â”‚
â”œâ”€â”€ docs/                      # æ–‡ä»¶
â”‚   â”œâ”€â”€ state-machine.md       # ç‹€æ…‹æ©Ÿåˆç´„ â­
â”‚   â”œâ”€â”€ api-spec.md            # API è¦æ ¼ â­
â”‚   â””â”€â”€ SYSTEM_SPEC.md         # ç³»çµ±è¦æ ¼æ›¸
â”‚
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚
- Java 23+
- Maven 3.9+
- JavaFX 23+

### å•Ÿå‹•å¾Œç«¯
```bash
cd server
mvn spring-boot:run
```

### å•Ÿå‹•å‰ç«¯ (ä¸‰è¦–çª—)
```bash
cd clients
mvn javafx:run -pl passenger-app
mvn javafx:run -pl driver-app
mvn javafx:run -pl admin-console
```

## ğŸ§ª æ¸¬è©¦é‡é»

### H2: æ¶å–®ä½µç™¼æ¸¬è©¦
```
å ´æ™¯: 10 ä½å¸æ©ŸåŒæ™‚å°åŒä¸€ç­† PENDING è¨‚å–®ç™¼é€ Accept
é æœŸ: åƒ… 1 ä½æˆåŠŸ (200 OK)ï¼Œå…¶é¤˜ 9 ä½å¤±æ•— (409 Conflict)
é©—è­‰: æœ€çµ‚ driverId å”¯ä¸€ï¼ŒAudit Log è¨˜éŒ„å®Œæ•´
```

### H4: å†ªç­‰æ€§æ¸¬è©¦
```
å ´æ™¯: åŒä¸€è«‹æ±‚å› ç¶²è·¯å•é¡Œè¢«é‡è¤‡ç™¼é€
é æœŸ: é‡è¤‡è«‹æ±‚ä¸ç”¢ç”Ÿå‰¯ä½œç”¨
é©—è­‰: driverIdã€startAtã€fare ç­‰é—œéµæ¬„ä½ä¸è¢«è¦†å¯«
```

### åŸ·è¡Œæ¸¬è©¦
```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
mvn test

# ç”¢ç”Ÿè¦†è“‹ç‡å ±å‘Š
mvn jacoco:report

# ç”¢ç”Ÿ PMD å ±å‘Š
mvn pmd:pmd
```

## ğŸ“– æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶ | èªªæ˜ | çµ„å“¡ç”¨é€” |
|-----|------|---------|
| [docs/state-machine.md](docs/state-machine.md) | ç‹€æ…‹æ©Ÿåˆç´„ | æ’°å¯«ç‹€æ…‹æ©Ÿæ¸¬è©¦ |
| [docs/api-spec.md](docs/api-spec.md) | API è¦æ ¼ | æ’°å¯«æ•´åˆæ¸¬è©¦ |
| [docs/SYSTEM_SPEC.md](docs/SYSTEM_SPEC.md) | ç³»çµ±è¦æ ¼æ›¸ | å ±å‘Šæ’°å¯«åƒè€ƒ |

## ğŸ”§ é–‹ç™¼æŒ‡å—

### API ç«¯é»ç¸½è¦½

#### Passenger API
| Method | Endpoint | èªªæ˜ |
|--------|----------|-----|
| POST | `/api/orders` | å»ºç«‹å«è»Š |
| GET | `/api/orders/{id}` | æŸ¥è©¢ç‹€æ…‹ |
| PUT | `/api/orders/{id}/cancel` | å–æ¶ˆè¨‚å–® |

#### Driver API
| Method | Endpoint | èªªæ˜ |
|--------|----------|-----|
| PUT | `/api/drivers/{id}/online` | ä¸Šç·š |
| GET | `/api/drivers/{id}/offers` | å–å¾—å¯æ¥å–® |
| PUT | `/api/orders/{id}/accept` | æ¥å–® |
| PUT | `/api/orders/{id}/start` | é–‹å§‹è¡Œç¨‹ |
| PUT | `/api/orders/{id}/complete` | å®Œæˆè¡Œç¨‹ |

#### Admin API
| Method | Endpoint | èªªæ˜ |
|--------|----------|-----|
| GET | `/api/admin/orders` | æ‰€æœ‰è¨‚å–® |
| GET | `/api/admin/audit-logs` | Audit Log |

## ğŸ“Š æ¸¬è©¦è¦†è“‹ç‡ç›®æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ |
|-----|-----|
| Branch Coverage | â‰¥ 90% |

## ğŸ‘¥ åœ˜éšŠåˆ†å·¥

| è§’è‰² | è² è²¬é …ç›® |
|-----|---------|
| å¾Œç«¯é–‹ç™¼ | Spring Boot Serverã€æ ¸å¿ƒé‚è¼¯ |
| å‰ç«¯é–‹ç™¼ | JavaFX ä¸‰è¦–çª— |
| æ¸¬è©¦ | JUnit å–®å…ƒ/æ•´åˆ/ä½µç™¼æ¸¬è©¦ |

---

**ç‰ˆæœ¬**: v0.1  
**æ›´æ–°æ—¥æœŸ**: 2025-12-25
